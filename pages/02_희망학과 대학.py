import streamlit as st
import pandas as pd
import folium
from streamlit_folium import st_folium

# ì˜ˆì‹œ ë°ì´í„° (ì‹¤ì œë¡œëŠ” CSVë‚˜ DB ì—°ë™ í•„ìš”)
data = [
    {"ëŒ€í•™êµ": "ì„œìš¸ëŒ€í•™êµ", "í•™ê³¼": "ì»´í“¨í„°ê³µí•™ê³¼", "ì…í•™ì „í˜•": "ìˆ˜ì‹œ, ì •ì‹œ", "ìœ„ë„": 37.4602, "ê²½ë„": 126.9527},
    {"ëŒ€í•™êµ": "ê³ ë ¤ëŒ€í•™êµ", "í•™ê³¼": "ì»´í“¨í„°í•™ê³¼", "ì…í•™ì „í˜•": "ìˆ˜ì‹œ, ì •ì‹œ", "ìœ„ë„": 37.5865, "ê²½ë„": 127.0296},
    {"ëŒ€í•™êµ": "í•œì–‘ëŒ€í•™êµ", "í•™ê³¼": "ì†Œí”„íŠ¸ì›¨ì–´í•™ë¶€", "ì…í•™ì „í˜•": "ì •ì‹œ", "ìœ„ë„": 37.5570, "ê²½ë„": 127.0459},
    {"ëŒ€í•™êµ": "ë¶€ì‚°ëŒ€í•™êµ", "í•™ê³¼": "ì»´í“¨í„°ê³µí•™ë¶€", "ì…í•™ì „í˜•": "ìˆ˜ì‹œ", "ìœ„ë„": 35.2323, "ê²½ë„": 129.0846},
    {"ëŒ€í•™êµ": "ê²½ë¶ëŒ€í•™êµ", "í•™ê³¼": "ì „ì‚°ì „ìê³µí•™ë¶€", "ì…í•™ì „í˜•": "ì •ì‹œ", "ìœ„ë„": 35.8886, "ê²½ë„": 128.6097},
    # í•„ìš”í•œ ë§Œí¼ ì¶”ê°€
]

df = pd.DataFrame(data)

st.title("ğŸ“ í¬ë§í•™ê³¼ ê¸°ë°˜ ëŒ€í•™êµ ì°¾ê¸°")

# ì‚¬ìš©ì ì…ë ¥
major_input = st.text_input("í¬ë§ í•™ê³¼ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: ì»´í“¨í„°ê³µí•™ê³¼, ê¸°ê³„ê³µí•™ê³¼ ë“±)")

if major_input:
    filtered = df[df["í•™ê³¼"].str.contains(major_input, case=False)]

    if filtered.empty:
        st.warning("í•´ë‹¹ í•™ê³¼ê°€ ìˆëŠ” ëŒ€í•™êµë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")
    else:
        st.success(f"{len(filtered)}ê°œì˜ ëŒ€í•™êµê°€ ê²€ìƒ‰ë˜ì—ˆìŠµë‹ˆë‹¤.")
        st.dataframe(filtered[["ëŒ€í•™êµ", "í•™ê³¼", "ì…í•™ì „í˜•"]])

        # ì§€ë„ ìƒì„±
        m = folium.Map(location=[36.5, 127.5], zoom_start=7)
        for _, row in filtered.iterrows():
            folium.Marker(
                location=[row["ìœ„ë„"], row["ê²½ë„"]],
                popup=f"{row['ëŒ€í•™êµ']} - {row['í•™ê³¼']}<br>{row['ì…í•™ì „í˜•']}",
                tooltip=row["ëŒ€í•™êµ"],
            ).add_to(m)

        st.subheader("ğŸ—ºï¸ ì§€ë„ì—ì„œ í•™êµ ìœ„ì¹˜ ë³´ê¸°")
        st_folium(m, width=700, height=500)
else:
    st.info("ìœ„ì˜ ì…ë ¥ì°½ì— í•™ê³¼ ì´ë¦„ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”.")
